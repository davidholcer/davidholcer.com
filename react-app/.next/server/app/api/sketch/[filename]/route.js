"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/sketch/[filename]/route";
exports.ids = ["app/api/sketch/[filename]/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&page=%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute.ts&appDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&page=%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute.ts&appDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_davidholcer_GitHub_davidholcer_com_cursored_react_app_src_app_api_sketch_filename_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/sketch/[filename]/route.ts */ \"(rsc)/./src/app/api/sketch/[filename]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/sketch/[filename]/route\",\n        pathname: \"/api/sketch/[filename]\",\n        filename: \"route\",\n        bundlePath: \"app/api/sketch/[filename]/route\"\n    },\n    resolvedPagePath: \"/Users/davidholcer/GitHub/davidholcer.com_cursored/react-app/src/app/api/sketch/[filename]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_davidholcer_GitHub_davidholcer_com_cursored_react_app_src_app_api_sketch_filename_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/sketch/[filename]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZza2V0Y2glMkYlNUJmaWxlbmFtZSU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc2tldGNoJTJGJTVCZmlsZW5hbWUlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZza2V0Y2glMkYlNUJmaWxlbmFtZSU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmRhdmlkaG9sY2VyJTJGR2l0SHViJTJGZGF2aWRob2xjZXIuY29tX2N1cnNvcmVkJTJGcmVhY3QtYXBwJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmRhdmlkaG9sY2VyJTJGR2l0SHViJTJGZGF2aWRob2xjZXIuY29tX2N1cnNvcmVkJTJGcmVhY3QtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtRDtBQUNoSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdmlkaG9sY2VyLXBvcnRmb2xpby8/YzIxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZGF2aWRob2xjZXIvR2l0SHViL2RhdmlkaG9sY2VyLmNvbV9jdXJzb3JlZC9yZWFjdC1hcHAvc3JjL2FwcC9hcGkvc2tldGNoL1tmaWxlbmFtZV0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NrZXRjaC9bZmlsZW5hbWVdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2tldGNoL1tmaWxlbmFtZV1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NrZXRjaC9bZmlsZW5hbWVdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2RhdmlkaG9sY2VyL0dpdEh1Yi9kYXZpZGhvbGNlci5jb21fY3Vyc29yZWQvcmVhY3QtYXBwL3NyYy9hcHAvYXBpL3NrZXRjaC9bZmlsZW5hbWVdL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9za2V0Y2gvW2ZpbGVuYW1lXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&page=%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute.ts&appDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/sketch/[filename]/route.ts":
/*!************************************************!*\
  !*** ./src/app/api/sketch/[filename]/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function GET(request, { params }) {\n    try {\n        const { filename } = params;\n        const { searchParams } = new URL(request.url);\n        // Debug: Log the URL and search parameters\n        console.log(\"API Route - Request URL:\", request.url);\n        console.log(\"API Route - Search params:\", Object.fromEntries(searchParams.entries()));\n        // Get dimensions from URL parameters\n        const sketchWidth = parseInt(searchParams.get(\"sketchWidth\") || \"800\");\n        const sketchHeight = parseInt(searchParams.get(\"sketchHeight\") || \"600\");\n        const domWidth = parseInt(searchParams.get(\"domWidth\") || \"800\");\n        const domHeight = parseInt(searchParams.get(\"domHeight\") || \"600\");\n        // Debug: Log the parsed dimensions\n        console.log(\"API Route - Parsed dimensions:\", {\n            sketchWidth,\n            sketchHeight,\n            domWidth,\n            domHeight\n        });\n        // Check if the sketch file exists\n        const sketchesDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"assets\", \"sketches\");\n        const sketchPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(sketchesDir, filename);\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(sketchPath)) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Sketch not found\", {\n                status: 404\n            });\n        }\n        // Read the sketch code\n        const sketchCode = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(sketchPath, \"utf8\");\n        // Inject the sketch dimensions directly into the createCanvas call\n        const modifiedSketchCode = sketchCode.replace(/createCanvas\\([^)]+\\)/g, `createCanvas(${sketchWidth}, ${sketchHeight})`);\n        console.log(\"API Route - Sketch dimensions:\", {\n            sketchWidth,\n            sketchHeight,\n            domWidth,\n            domHeight\n        });\n        // Create the HTML with the sketch embedded\n        const html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>P5.js Sketch - ${filename}</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/p5@1.11.9/lib/p5.min.js\"></script>\n    <style>\n        body {\n            margin: 0;\n            padding: 0;\n            background: #f0f0f0;\n            overflow: hidden;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            width: ${domWidth}px;\n            height: ${domHeight}px;\n            /* Ensure mouse events pass through to canvas */\n            pointer-events: auto;\n        }\n        canvas {\n            display: block;\n            /* No scaling - canvas stays at full size */\n            /* The sketch will run at sketchWidth x sketchHeight */\n            /* but the DOM container will be domWidth x domHeight */\n            /* Ensure canvas receives mouse events */\n            pointer-events: auto;\n            /* Ensure canvas is interactive */\n            cursor: pointer;\n            /* Prevent any interference with mouse events */\n            user-select: none;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n        }\n        html {\n            overflow: hidden;\n        }\n        \n        /* Fullscreen styles */\n        body.fullscreen {\n            width: 100vw !important;\n            height: 100vh !important;\n            position: fixed;\n            top: 0;\n            left: 0;\n            z-index: 9999;\n            transition: all 0.2s ease-out;\n            overflow: hidden;\n        }\n        \n        body.fullscreen canvas {\n            width: 100vw !important;\n            height: 100vh !important;\n            transition: all 0.2s ease-out;\n            pointer-events: auto;\n            /* Ensure canvas can receive wheel events in fullscreen */\n            position: relative;\n            z-index: 1;\n        }\n        \n        canvas {\n            transition: all 0.2s ease-out;\n        }\n        \n        /* Fullscreen indicator */\n        .fullscreen-indicator {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: rgba(0, 0, 0, 0.7);\n            color: white;\n            padding: 10px 15px;\n            border-radius: 5px;\n            font-family: Arial, sans-serif;\n            font-size: 14px;\n            z-index: 10000;\n            display: none;\n            opacity: 1;\n            transition: opacity 0.3s ease-out;\n        }\n        \n        body.fullscreen .fullscreen-indicator {\n            display: block;\n        }\n        \n        .fullscreen-indicator.fade-out {\n            opacity: 0;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"fullscreen-indicator\">\n        Fullscreen Mode - Press F or ESC to exit\n    </div>\n    <script>\n        // Set up global variables that the sketch expects\n        window.$fxhashFeatures = {\n            Levels: 3,\n            Speed: 'medium',\n            'Stroke Type': 'All',\n            'Click Ease': 'Mixed',\n            'Number of Shapes': 5,\n            Shapes: 'cltrphso',\n            'Color Scheme': 'Techno Vanilla',\n            Density: '50%',\n            'Return Time': 30,\n            'Go Time': 15\n        };\n\n        window.fxrand = () => Math.random();\n\n        // Store original dimensions\n        let originalWidth = ${sketchWidth};\n        let originalHeight = ${sketchHeight};\n        let domWidth = ${domWidth};\n        let domHeight = ${domHeight};\n        let isFullscreen = false;\n\n        // Embed the modified sketch code\n        ${modifiedSketchCode}\n\n        // Override the setup function to handle fullscreen properly\n        const originalSetup = window.setup;\n        window.setup = function() {\n            // Call original setup\n            if (originalSetup) {\n                originalSetup();\n            }\n            \n            // Set initial canvas size based on current state\n            if (isFullscreen) {\n                resizeCanvas(window.screen.width, window.screen.height);\n            } else {\n                resizeCanvas(domWidth, domHeight);\n            }\n            \n            // Add wheel event listener directly to canvas\n            const canvas = document.querySelector('canvas');\n            if (canvas) {\n                canvas.addEventListener('wheel', function(event) {\n                    event.preventDefault();\n                }, { passive: false });\n            }\n            \n\n        };\n\n        // Add fullscreen functionality\n        function keyPressed() {\n            if (key === 'f' || key === 'F') {\n                toggleFullscreen();\n            } else if (keyCode === ESCAPE && isFullscreen) {\n                // Exit fullscreen with Escape key\n                toggleFullscreen();\n            }\n        }\n        \n        function toggleFullscreen() {\n            isFullscreen = !isFullscreen;\n            console.log('Toggle fullscreen:', isFullscreen ? 'entering' : 'exiting');\n            \n            if (isFullscreen) {\n                // Enter fullscreen\n                document.body.classList.add('fullscreen');\n                resizeCanvas(window.screen.width, window.screen.height);\n                console.log('Canvas resized to fullscreen:', window.screen.width, 'x', window.screen.height);\n                \n\n                \n\n                \n                // Show fullscreen indicator and hide after 5 seconds\n                const indicator = document.querySelector('.fullscreen-indicator');\n                if (indicator) {\n                    indicator.classList.remove('fade-out');\n                    setTimeout(() => {\n                        indicator.classList.add('fade-out');\n                        setTimeout(() => {\n                            indicator.style.display = 'none';\n                        }, 300); // Wait for fade transition\n                    }, 5000);\n                }\n                \n                // Notify parent window\n                if (window.parent && window.parent !== window) {\n                    window.parent.postMessage({ type: 'fullscreen', enabled: true }, '*');\n                }\n                \n                // Try to request fullscreen on the iframe itself\n                try {\n                    if (document.documentElement.requestFullscreen) {\n                        document.documentElement.requestFullscreen();\n                    } else if (document.documentElement.webkitRequestFullscreen) {\n                        document.documentElement.webkitRequestFullscreen();\n                    } else if (document.documentElement.msRequestFullscreen) {\n                        document.documentElement.msRequestFullscreen();\n                    }\n                } catch (e) {\n                    console.log('Fullscreen API not available, using CSS fullscreen');\n                }\n            } else {\n                // Exit fullscreen\n                document.body.classList.remove('fullscreen');\n                console.log('Exiting fullscreen, resizing to DOM dimensions:', domWidth, 'x', domHeight);\n                \n\n                \n                // Hide fullscreen indicator immediately when exiting\n                const indicator = document.querySelector('.fullscreen-indicator');\n                if (indicator) {\n                    indicator.classList.add('fade-out');\n                    setTimeout(() => {\n                        indicator.style.display = 'none';\n                    }, 300);\n                }\n                \n                // Notify parent window first\n                if (window.parent && window.parent !== window) {\n                    window.parent.postMessage({ type: 'fullscreen', enabled: false }, '*');\n                }\n                \n                // Small delay to ensure parent has updated before resizing canvas\n                setTimeout(() => {\n                    try {\n                        resizeCanvas(domWidth, domHeight);\n                        console.log('Canvas resized to DOM dimensions:', domWidth, 'x', domHeight);\n                    } catch (error) {\n                        console.error('Error resizing canvas:', error);\n                        // Fallback: try to resize manually\n                        const canvas = document.querySelector('canvas');\n                        if (canvas) {\n                            canvas.width = domWidth;\n                            canvas.height = domHeight;\n                            console.log('Canvas manually resized to:', domWidth, 'x', domHeight);\n                        }\n                    }\n                }, 100);\n                \n                // Exit fullscreen if available\n                try {\n                    if (document.exitFullscreen) {\n                        document.exitFullscreen();\n                    } else if (document.webkitExitFullscreen) {\n                        document.webkitExitFullscreen();\n                    } else if (document.msExitFullscreen) {\n                        document.msExitFullscreen();\n                    }\n                } catch (e) {\n                    console.log('Fullscreen exit failed');\n                }\n            }\n        }\n        \n        // Handle fullscreen change events\n        document.addEventListener('fullscreenchange', handleFullscreenChange);\n        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\n        document.addEventListener('msfullscreenchange', handleFullscreenChange);\n        \n        function handleFullscreenChange() {\n            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n                // Exited fullscreen\n                isFullscreen = false;\n                document.body.classList.remove('fullscreen');\n                \n\n                \n                // Hide fullscreen indicator immediately when exiting\n                const indicator = document.querySelector('.fullscreen-indicator');\n                if (indicator) {\n                    indicator.classList.add('fade-out');\n                    setTimeout(() => {\n                        indicator.style.display = 'none';\n                    }, 300);\n                }\n                \n                // Notify parent window\n                if (window.parent && window.parent !== window) {\n                    window.parent.postMessage({ type: 'fullscreen', enabled: false }, '*');\n                }\n                \n                // Small delay to ensure parent has updated before resizing canvas\n                setTimeout(() => {\n                    try {\n                        resizeCanvas(domWidth, domHeight);\n                        console.log('Canvas resized to DOM dimensions from fullscreen change:', domWidth, 'x', domHeight);\n                    } catch (error) {\n                        console.error('Error resizing canvas from fullscreen change:', error);\n                        // Fallback: try to resize manually\n                        const canvas = document.querySelector('canvas');\n                        if (canvas) {\n                            canvas.width = domWidth;\n                            canvas.height = domHeight;\n                            console.log('Canvas manually resized to:', domWidth, 'x', domHeight);\n                        }\n                    }\n                }, 100);\n            }\n        }\n        \n        // Handle clicks outside canvas to exit fullscreen\n        document.addEventListener('click', function(event) {\n            if (isFullscreen && event.target === document.body) {\n                toggleFullscreen();\n            }\n        });\n        \n        // Handle wheel events for P5.js sketches\n        function preventWheelScroll(event) {\n            event.preventDefault();\n        }\n        \n        // Add wheel event listeners\n        document.addEventListener('wheel', preventWheelScroll, { passive: false });\n        document.body.addEventListener('wheel', preventWheelScroll, { passive: false });\n        \n        // Override windowResized to handle fullscreen properly\n        const originalWindowResized = window.windowResized;\n        window.windowResized = function() {\n            try {\n                if (isFullscreen) {\n                    // In fullscreen mode - use full screen dimensions\n                    resizeCanvas(window.screen.width, window.screen.height);\n                    console.log('Window resized in fullscreen mode:', window.screen.width, 'x', window.screen.height);\n                } else {\n                    // In normal mode - use DOM dimensions\n                    resizeCanvas(domWidth, domHeight);\n                    console.log('Window resized in normal mode:', domWidth, 'x', domHeight);\n                }\n                \n                // Call the original windowResized if it exists\n                if (originalWindowResized) {\n                    originalWindowResized();\n                }\n            } catch (error) {\n                console.error('Error in windowResized:', error);\n                // Fallback: try to resize manually\n                const canvas = document.querySelector('canvas');\n                if (canvas) {\n                    if (isFullscreen) {\n                        canvas.width = window.screen.width;\n                        canvas.height = window.screen.height;\n                    } else {\n                        canvas.width = domWidth;\n                        canvas.height = domHeight;\n                    }\n                }\n            }\n        };\n    </script>\n</body>\n</html>`;\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(html, {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"text/html\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error serving sketch:\", error);\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Internal server error\", {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9za2V0Y2gvW2ZpbGVuYW1lXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0Q7QUFDcEM7QUFDSTtBQVFqQixlQUFlRyxJQUFJQyxPQUFvQixFQUFFLEVBQUVDLE1BQU0sRUFBZTtJQUNyRSxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0Q7UUFDckIsTUFBTSxFQUFFRSxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJSixRQUFRSyxHQUFHO1FBRTVDLDJDQUEyQztRQUMzQ0MsUUFBUUMsR0FBRyxDQUFDLDRCQUE0QlAsUUFBUUssR0FBRztRQUNuREMsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QkMsT0FBT0MsV0FBVyxDQUFDTixhQUFhTyxPQUFPO1FBRWpGLHFDQUFxQztRQUNyQyxNQUFNQyxjQUFjQyxTQUFTVCxhQUFhVSxHQUFHLENBQUMsa0JBQWtCO1FBQ2hFLE1BQU1DLGVBQWVGLFNBQVNULGFBQWFVLEdBQUcsQ0FBQyxtQkFBbUI7UUFDbEUsTUFBTUUsV0FBV0gsU0FBU1QsYUFBYVUsR0FBRyxDQUFDLGVBQWU7UUFDMUQsTUFBTUcsWUFBWUosU0FBU1QsYUFBYVUsR0FBRyxDQUFDLGdCQUFnQjtRQUU1RCxtQ0FBbUM7UUFDbkNQLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0M7WUFDNUNJO1lBQ0FHO1lBQ0FDO1lBQ0FDO1FBQ0Y7UUFFQSxrQ0FBa0M7UUFDbEMsTUFBTUMsY0FBY25CLGdEQUFTLENBQUNxQixRQUFRQyxHQUFHLElBQUksVUFBVSxVQUFVO1FBQ2pFLE1BQU1DLGFBQWF2QixnREFBUyxDQUFDbUIsYUFBYWY7UUFFMUMsSUFBSSxDQUFDTCxvREFBYSxDQUFDd0IsYUFBYTtZQUM5QixPQUFPLElBQUl6QixxREFBWUEsQ0FBQyxvQkFBb0I7Z0JBQUUyQixRQUFRO1lBQUk7UUFDNUQ7UUFFQSx1QkFBdUI7UUFDdkIsTUFBTUMsYUFBYTNCLHNEQUFlLENBQUN3QixZQUFZO1FBRS9DLG1FQUFtRTtRQUNuRSxNQUFNSyxxQkFBcUJGLFdBQVdHLE9BQU8sQ0FDM0MsMEJBQ0EsQ0FBQyxhQUFhLEVBQUVoQixZQUFZLEVBQUUsRUFBRUcsYUFBYSxDQUFDLENBQUM7UUFHakRSLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0M7WUFDNUNJO1lBQ0FHO1lBQ0FDO1lBQ0FDO1FBQ0Y7UUFFQSwyQ0FBMkM7UUFDM0MsTUFBTVksT0FBTyxDQUFDOzs7OzswQkFLUSxFQUFFMUIsU0FBUzs7Ozs7Ozs7Ozs7bUJBV2xCLEVBQUVhLFNBQVM7b0JBQ1YsRUFBRUMsVUFBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFpR0osRUFBRUwsWUFBWTs2QkFDYixFQUFFRyxhQUFhO3VCQUNyQixFQUFFQyxTQUFTO3dCQUNWLEVBQUVDLFVBQVU7Ozs7UUFJNUIsRUFBRVUsbUJBQW1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0F1T3RCLENBQUM7UUFFSixPQUFPLElBQUk5QixxREFBWUEsQ0FBQ2dDLE1BQU07WUFDNUJMLFFBQVE7WUFDUk0sU0FBUztnQkFDUCxnQkFBZ0I7WUFDbEI7UUFDRjtJQUVGLEVBQUUsT0FBT0MsT0FBTztRQUNkeEIsUUFBUXdCLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU8sSUFBSWxDLHFEQUFZQSxDQUFDLHlCQUF5QjtZQUFFMkIsUUFBUTtRQUFJO0lBQ2pFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXZpZGhvbGNlci1wb3J0Zm9saW8vLi9zcmMvYXBwL2FwaS9za2V0Y2gvW2ZpbGVuYW1lXS9yb3V0ZS50cz83OGFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmludGVyZmFjZSBSb3V0ZVBhcmFtcyB7XG4gIHBhcmFtczoge1xuICAgIGZpbGVuYW1lOiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IFJvdXRlUGFyYW1zKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBmaWxlbmFtZSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHRoZSBVUkwgYW5kIHNlYXJjaCBwYXJhbWV0ZXJzXG4gICAgY29uc29sZS5sb2coJ0FQSSBSb3V0ZSAtIFJlcXVlc3QgVVJMOicsIHJlcXVlc3QudXJsKTtcbiAgICBjb25zb2xlLmxvZygnQVBJIFJvdXRlIC0gU2VhcmNoIHBhcmFtczonLCBPYmplY3QuZnJvbUVudHJpZXMoc2VhcmNoUGFyYW1zLmVudHJpZXMoKSkpO1xuICAgIFxuICAgIC8vIEdldCBkaW1lbnNpb25zIGZyb20gVVJMIHBhcmFtZXRlcnNcbiAgICBjb25zdCBza2V0Y2hXaWR0aCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3NrZXRjaFdpZHRoJykgfHwgJzgwMCcpO1xuICAgIGNvbnN0IHNrZXRjaEhlaWdodCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3NrZXRjaEhlaWdodCcpIHx8ICc2MDAnKTtcbiAgICBjb25zdCBkb21XaWR0aCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2RvbVdpZHRoJykgfHwgJzgwMCcpO1xuICAgIGNvbnN0IGRvbUhlaWdodCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2RvbUhlaWdodCcpIHx8ICc2MDAnKTtcbiAgICBcbiAgICAvLyBEZWJ1ZzogTG9nIHRoZSBwYXJzZWQgZGltZW5zaW9uc1xuICAgIGNvbnNvbGUubG9nKCdBUEkgUm91dGUgLSBQYXJzZWQgZGltZW5zaW9uczonLCB7XG4gICAgICBza2V0Y2hXaWR0aCxcbiAgICAgIHNrZXRjaEhlaWdodCxcbiAgICAgIGRvbVdpZHRoLFxuICAgICAgZG9tSGVpZ2h0XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHNrZXRjaCBmaWxlIGV4aXN0c1xuICAgIGNvbnN0IHNrZXRjaGVzRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnYXNzZXRzJywgJ3NrZXRjaGVzJyk7XG4gICAgY29uc3Qgc2tldGNoUGF0aCA9IHBhdGguam9pbihza2V0Y2hlc0RpciwgZmlsZW5hbWUpO1xuICAgIFxuICAgIGlmICghZnMuZXhpc3RzU3luYyhza2V0Y2hQYXRoKSkge1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoJ1NrZXRjaCBub3QgZm91bmQnLCB7IHN0YXR1czogNDA0IH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZWFkIHRoZSBza2V0Y2ggY29kZVxuICAgIGNvbnN0IHNrZXRjaENvZGUgPSBmcy5yZWFkRmlsZVN5bmMoc2tldGNoUGF0aCwgJ3V0ZjgnKTtcbiAgICBcbiAgICAvLyBJbmplY3QgdGhlIHNrZXRjaCBkaW1lbnNpb25zIGRpcmVjdGx5IGludG8gdGhlIGNyZWF0ZUNhbnZhcyBjYWxsXG4gICAgY29uc3QgbW9kaWZpZWRTa2V0Y2hDb2RlID0gc2tldGNoQ29kZS5yZXBsYWNlKFxuICAgICAgL2NyZWF0ZUNhbnZhc1xcKFteKV0rXFwpL2csXG4gICAgICBgY3JlYXRlQ2FudmFzKCR7c2tldGNoV2lkdGh9LCAke3NrZXRjaEhlaWdodH0pYFxuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0FQSSBSb3V0ZSAtIFNrZXRjaCBkaW1lbnNpb25zOicsIHtcbiAgICAgIHNrZXRjaFdpZHRoLFxuICAgICAgc2tldGNoSGVpZ2h0LFxuICAgICAgZG9tV2lkdGgsXG4gICAgICBkb21IZWlnaHRcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdGhlIEhUTUwgd2l0aCB0aGUgc2tldGNoIGVtYmVkZGVkXG4gICAgY29uc3QgaHRtbCA9IGA8IURPQ1RZUEUgaHRtbD5cbjxodG1sIGxhbmc9XCJlblwiPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+UDUuanMgU2tldGNoIC0gJHtmaWxlbmFtZX08L3RpdGxlPlxuICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9wNUAxLjExLjkvbGliL3A1Lm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIDxzdHlsZT5cbiAgICAgICAgYm9keSB7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDtcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgd2lkdGg6ICR7ZG9tV2lkdGh9cHg7XG4gICAgICAgICAgICBoZWlnaHQ6ICR7ZG9tSGVpZ2h0fXB4O1xuICAgICAgICAgICAgLyogRW5zdXJlIG1vdXNlIGV2ZW50cyBwYXNzIHRocm91Z2ggdG8gY2FudmFzICovXG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgfVxuICAgICAgICBjYW52YXMge1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAvKiBObyBzY2FsaW5nIC0gY2FudmFzIHN0YXlzIGF0IGZ1bGwgc2l6ZSAqL1xuICAgICAgICAgICAgLyogVGhlIHNrZXRjaCB3aWxsIHJ1biBhdCBza2V0Y2hXaWR0aCB4IHNrZXRjaEhlaWdodCAqL1xuICAgICAgICAgICAgLyogYnV0IHRoZSBET00gY29udGFpbmVyIHdpbGwgYmUgZG9tV2lkdGggeCBkb21IZWlnaHQgKi9cbiAgICAgICAgICAgIC8qIEVuc3VyZSBjYW52YXMgcmVjZWl2ZXMgbW91c2UgZXZlbnRzICovXG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgICAgIC8qIEVuc3VyZSBjYW52YXMgaXMgaW50ZXJhY3RpdmUgKi9cbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIC8qIFByZXZlbnQgYW55IGludGVyZmVyZW5jZSB3aXRoIG1vdXNlIGV2ZW50cyAqL1xuICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICBodG1sIHtcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qIEZ1bGxzY3JlZW4gc3R5bGVzICovXG4gICAgICAgIGJvZHkuZnVsbHNjcmVlbiB7XG4gICAgICAgICAgICB3aWR0aDogMTAwdncgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGhlaWdodDogMTAwdmggIWltcG9ydGFudDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICB6LWluZGV4OiA5OTk5O1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1vdXQ7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBib2R5LmZ1bGxzY3JlZW4gY2FudmFzIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDB2dyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1vdXQ7XG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgICAgIC8qIEVuc3VyZSBjYW52YXMgY2FuIHJlY2VpdmUgd2hlZWwgZXZlbnRzIGluIGZ1bGxzY3JlZW4gKi9cbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNhbnZhcyB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLW91dDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyogRnVsbHNjcmVlbiBpbmRpY2F0b3IgKi9cbiAgICAgICAgLmZ1bGxzY3JlZW4taW5kaWNhdG9yIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIHRvcDogMjBweDtcbiAgICAgICAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgei1pbmRleDogMTAwMDA7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlLW91dDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYm9keS5mdWxsc2NyZWVuIC5mdWxsc2NyZWVuLWluZGljYXRvciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmZ1bGxzY3JlZW4taW5kaWNhdG9yLmZhZGUtb3V0IHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIH1cbiAgICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cImZ1bGxzY3JlZW4taW5kaWNhdG9yXCI+XG4gICAgICAgIEZ1bGxzY3JlZW4gTW9kZSAtIFByZXNzIEYgb3IgRVNDIHRvIGV4aXRcbiAgICA8L2Rpdj5cbiAgICA8c2NyaXB0PlxuICAgICAgICAvLyBTZXQgdXAgZ2xvYmFsIHZhcmlhYmxlcyB0aGF0IHRoZSBza2V0Y2ggZXhwZWN0c1xuICAgICAgICB3aW5kb3cuJGZ4aGFzaEZlYXR1cmVzID0ge1xuICAgICAgICAgICAgTGV2ZWxzOiAzLFxuICAgICAgICAgICAgU3BlZWQ6ICdtZWRpdW0nLFxuICAgICAgICAgICAgJ1N0cm9rZSBUeXBlJzogJ0FsbCcsXG4gICAgICAgICAgICAnQ2xpY2sgRWFzZSc6ICdNaXhlZCcsXG4gICAgICAgICAgICAnTnVtYmVyIG9mIFNoYXBlcyc6IDUsXG4gICAgICAgICAgICBTaGFwZXM6ICdjbHRycGhzbycsXG4gICAgICAgICAgICAnQ29sb3IgU2NoZW1lJzogJ1RlY2hubyBWYW5pbGxhJyxcbiAgICAgICAgICAgIERlbnNpdHk6ICc1MCUnLFxuICAgICAgICAgICAgJ1JldHVybiBUaW1lJzogMzAsXG4gICAgICAgICAgICAnR28gVGltZSc6IDE1XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmZ4cmFuZCA9ICgpID0+IE1hdGgucmFuZG9tKCk7XG5cbiAgICAgICAgLy8gU3RvcmUgb3JpZ2luYWwgZGltZW5zaW9uc1xuICAgICAgICBsZXQgb3JpZ2luYWxXaWR0aCA9ICR7c2tldGNoV2lkdGh9O1xuICAgICAgICBsZXQgb3JpZ2luYWxIZWlnaHQgPSAke3NrZXRjaEhlaWdodH07XG4gICAgICAgIGxldCBkb21XaWR0aCA9ICR7ZG9tV2lkdGh9O1xuICAgICAgICBsZXQgZG9tSGVpZ2h0ID0gJHtkb21IZWlnaHR9O1xuICAgICAgICBsZXQgaXNGdWxsc2NyZWVuID0gZmFsc2U7XG5cbiAgICAgICAgLy8gRW1iZWQgdGhlIG1vZGlmaWVkIHNrZXRjaCBjb2RlXG4gICAgICAgICR7bW9kaWZpZWRTa2V0Y2hDb2RlfVxuXG4gICAgICAgIC8vIE92ZXJyaWRlIHRoZSBzZXR1cCBmdW5jdGlvbiB0byBoYW5kbGUgZnVsbHNjcmVlbiBwcm9wZXJseVxuICAgICAgICBjb25zdCBvcmlnaW5hbFNldHVwID0gd2luZG93LnNldHVwO1xuICAgICAgICB3aW5kb3cuc2V0dXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIENhbGwgb3JpZ2luYWwgc2V0dXBcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFNldHVwKSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxTZXR1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgaW5pdGlhbCBjYW52YXMgc2l6ZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICBpZiAoaXNGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgcmVzaXplQ2FudmFzKHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzaXplQ2FudmFzKGRvbVdpZHRoLCBkb21IZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgd2hlZWwgZXZlbnQgbGlzdGVuZXIgZGlyZWN0bHkgdG8gY2FudmFzXG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICAgICAgICAgIGlmIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcblxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFkZCBmdWxsc2NyZWVuIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgZnVuY3Rpb24ga2V5UHJlc3NlZCgpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdmJyB8fCBrZXkgPT09ICdGJykge1xuICAgICAgICAgICAgICAgIHRvZ2dsZUZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gRVNDQVBFICYmIGlzRnVsbHNjcmVlbikge1xuICAgICAgICAgICAgICAgIC8vIEV4aXQgZnVsbHNjcmVlbiB3aXRoIEVzY2FwZSBrZXlcbiAgICAgICAgICAgICAgICB0b2dnbGVGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUZ1bGxzY3JlZW4oKSB7XG4gICAgICAgICAgICBpc0Z1bGxzY3JlZW4gPSAhaXNGdWxsc2NyZWVuO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RvZ2dsZSBmdWxsc2NyZWVuOicsIGlzRnVsbHNjcmVlbiA/ICdlbnRlcmluZycgOiAnZXhpdGluZycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaXNGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgLy8gRW50ZXIgZnVsbHNjcmVlblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbicpO1xuICAgICAgICAgICAgICAgIHJlc2l6ZUNhbnZhcyh3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3cuc2NyZWVuLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhbnZhcyByZXNpemVkIHRvIGZ1bGxzY3JlZW46Jywgd2luZG93LnNjcmVlbi53aWR0aCwgJ3gnLCB3aW5kb3cuc2NyZWVuLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNob3cgZnVsbHNjcmVlbiBpbmRpY2F0b3IgYW5kIGhpZGUgYWZ0ZXIgNSBzZWNvbmRzXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZ1bGxzY3JlZW4taW5kaWNhdG9yJyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGljYXRvcikge1xuICAgICAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZS1vdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnZmFkZS1vdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsgLy8gV2FpdCBmb3IgZmFkZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBOb3RpZnkgcGFyZW50IHdpbmRvd1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cucGFyZW50ICYmIHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogJ2Z1bGxzY3JlZW4nLCBlbmFibGVkOiB0cnVlIH0sICcqJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byByZXF1ZXN0IGZ1bGxzY3JlZW4gb24gdGhlIGlmcmFtZSBpdHNlbGZcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRnVsbHNjcmVlbiBBUEkgbm90IGF2YWlsYWJsZSwgdXNpbmcgQ1NTIGZ1bGxzY3JlZW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEV4aXQgZnVsbHNjcmVlblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZnVsbHNjcmVlbicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFeGl0aW5nIGZ1bGxzY3JlZW4sIHJlc2l6aW5nIHRvIERPTSBkaW1lbnNpb25zOicsIGRvbVdpZHRoLCAneCcsIGRvbUhlaWdodCk7XG4gICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBIaWRlIGZ1bGxzY3JlZW4gaW5kaWNhdG9yIGltbWVkaWF0ZWx5IHdoZW4gZXhpdGluZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGljYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mdWxsc2NyZWVuLWluZGljYXRvcicpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRpY2F0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ2ZhZGUtb3V0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBwYXJlbnQgd2luZG93IGZpcnN0XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5wYXJlbnQgJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAnZnVsbHNjcmVlbicsIGVuYWJsZWQ6IGZhbHNlIH0sICcqJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBwYXJlbnQgaGFzIHVwZGF0ZWQgYmVmb3JlIHJlc2l6aW5nIGNhbnZhc1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplQ2FudmFzKGRvbVdpZHRoLCBkb21IZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhbnZhcyByZXNpemVkIHRvIERPTSBkaW1lbnNpb25zOicsIGRvbVdpZHRoLCAneCcsIGRvbUhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXNpemluZyBjYW52YXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHRyeSB0byByZXNpemUgbWFudWFsbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbnZhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGRvbVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBkb21IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhbnZhcyBtYW51YWxseSByZXNpemVkIHRvOicsIGRvbVdpZHRoLCAneCcsIGRvbUhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEV4aXQgZnVsbHNjcmVlbiBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRnVsbHNjcmVlbiBleGl0IGZhaWxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGZ1bGxzY3JlZW4gY2hhbmdlIGV2ZW50c1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVGdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbXNmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSk7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVGdWxsc2NyZWVuQ2hhbmdlKCkge1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCAmJiAhZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQgJiYgIWRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBFeGl0ZWQgZnVsbHNjcmVlblxuICAgICAgICAgICAgICAgIGlzRnVsbHNjcmVlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZnVsbHNjcmVlbicpO1xuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSGlkZSBmdWxsc2NyZWVuIGluZGljYXRvciBpbW1lZGlhdGVseSB3aGVuIGV4aXRpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVsbHNjcmVlbi1pbmRpY2F0b3InKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdmYWRlLW91dCcpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBOb3RpZnkgcGFyZW50IHdpbmRvd1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cucGFyZW50ICYmIHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogJ2Z1bGxzY3JlZW4nLCBlbmFibGVkOiBmYWxzZSB9LCAnKicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgcGFyZW50IGhhcyB1cGRhdGVkIGJlZm9yZSByZXNpemluZyBjYW52YXNcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZUNhbnZhcyhkb21XaWR0aCwgZG9tSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYW52YXMgcmVzaXplZCB0byBET00gZGltZW5zaW9ucyBmcm9tIGZ1bGxzY3JlZW4gY2hhbmdlOicsIGRvbVdpZHRoLCAneCcsIGRvbUhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXNpemluZyBjYW52YXMgZnJvbSBmdWxsc2NyZWVuIGNoYW5nZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogdHJ5IHRvIHJlc2l6ZSBtYW51YWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gZG9tV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGRvbUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ2FudmFzIG1hbnVhbGx5IHJlc2l6ZWQgdG86JywgZG9tV2lkdGgsICd4JywgZG9tSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBjbGlja3Mgb3V0c2lkZSBjYW52YXMgdG8gZXhpdCBmdWxsc2NyZWVuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0Z1bGxzY3JlZW4gJiYgZXZlbnQudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlRnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSB3aGVlbCBldmVudHMgZm9yIFA1LmpzIHNrZXRjaGVzXG4gICAgICAgIGZ1bmN0aW9uIHByZXZlbnRXaGVlbFNjcm9sbChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHdoZWVsIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHByZXZlbnRXaGVlbFNjcm9sbCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHByZXZlbnRXaGVlbFNjcm9sbCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIE92ZXJyaWRlIHdpbmRvd1Jlc2l6ZWQgdG8gaGFuZGxlIGZ1bGxzY3JlZW4gcHJvcGVybHlcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxXaW5kb3dSZXNpemVkID0gd2luZG93LndpbmRvd1Jlc2l6ZWQ7XG4gICAgICAgIHdpbmRvdy53aW5kb3dSZXNpemVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gZnVsbHNjcmVlbiBtb2RlIC0gdXNlIGZ1bGwgc2NyZWVuIGRpbWVuc2lvbnNcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplQ2FudmFzKHdpbmRvdy5zY3JlZW4ud2lkdGgsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1dpbmRvdyByZXNpemVkIGluIGZ1bGxzY3JlZW4gbW9kZTonLCB3aW5kb3cuc2NyZWVuLndpZHRoLCAneCcsIHdpbmRvdy5zY3JlZW4uaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiBub3JtYWwgbW9kZSAtIHVzZSBET00gZGltZW5zaW9uc1xuICAgICAgICAgICAgICAgICAgICByZXNpemVDYW52YXMoZG9tV2lkdGgsIGRvbUhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXaW5kb3cgcmVzaXplZCBpbiBub3JtYWwgbW9kZTonLCBkb21XaWR0aCwgJ3gnLCBkb21IZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBvcmlnaW5hbCB3aW5kb3dSZXNpemVkIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbFdpbmRvd1Jlc2l6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxXaW5kb3dSZXNpemVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB3aW5kb3dSZXNpemVkOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogdHJ5IHRvIHJlc2l6ZSBtYW51YWxseVxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgIGlmIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVsbHNjcmVlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LnNjcmVlbi53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuc2NyZWVuLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGRvbVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGRvbUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICA8L3NjcmlwdD5cbjwvYm9keT5cbjwvaHRtbD5gO1xuICAgIFxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKGh0bWwsIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvaHRtbCcsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlcnZpbmcgc2tldGNoOicsIGVycm9yKTtcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZSgnSW50ZXJuYWwgc2VydmVyIGVycm9yJywgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZnMiLCJwYXRoIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsImZpbGVuYW1lIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiY29uc29sZSIsImxvZyIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsInNrZXRjaFdpZHRoIiwicGFyc2VJbnQiLCJnZXQiLCJza2V0Y2hIZWlnaHQiLCJkb21XaWR0aCIsImRvbUhlaWdodCIsInNrZXRjaGVzRGlyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJza2V0Y2hQYXRoIiwiZXhpc3RzU3luYyIsInN0YXR1cyIsInNrZXRjaENvZGUiLCJyZWFkRmlsZVN5bmMiLCJtb2RpZmllZFNrZXRjaENvZGUiLCJyZXBsYWNlIiwiaHRtbCIsImhlYWRlcnMiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/sketch/[filename]/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&page=%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsketch%2F%5Bfilename%5D%2Froute.ts&appDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavidholcer%2FGitHub%2Fdavidholcer.com_cursored%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();